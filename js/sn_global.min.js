if(typeof(window.LOADED_GLOBAL)==="undefined"){var LOADED_GLOBAL=true;$.fn.__tabs=$.fn.tabs;$.fn.tabs=function(h,g,m,l,k,j){var i=window.location.href.replace(/#.*$/,"");$('ul > li > a[href^="#"]',this).each(function(){var a=$(this).attr("href");$(this).attr("href",i+a)});return $(this).__tabs(h,g,m,l,k,j)};Math.percent=function(b,a,c){!c?c=1:false;return a?Math.round((b/a*100*c)/c):0};Math.percentPixels=function(b,a,c){return a?Math.round((c<0?-c:0)+(b/a*c))+"px":0};var sn_inframe;function getFrameName(b){for(var a=0;a<parent.frames.length;a++){if(parent.frames[a]===b){return(parent.frames[a].name)}}}sn_inframe=window.frameElement?getFrameName(self):false;var sn_delay=function(b,c){var a=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return b.apply(null,a)},c)};String.prototype.format=function(){var a=arguments;return this.replace(/\{\{|\}\}|\{(\d+)\}/g,function(b,c){if(b=="{{"){return"{"}if(b=="}}"){return"}"}return a[c]})};var language={};var x="";var e=null;function document_ready(){inputs=jQuery("input:not(.do-not-skin),button:not(.do-not-skin)");inputs.filter(":button, :submit, :reset").button();inputs.filter(":text, :password, :file").button().addClass("ui-textfield ui-input-text").off("keydown");inputs.filter(":radio").addClass("ui-corner-all ui-state-default ui-textfield");jQuery("button:not(.do-not-skin)").button().addClass("ui-textfield");jQuery("textarea:not(#ally_text)").button().addClass("ui-textfield ui-input-text").off("keydown");if(typeof(sn_timer)==="function"){sn_timer()}$(document).on("click","#font_minus, #font_normal, #font_plus",function(){var a=FONT_SIZE;$(this).attr("id")=="font_plus"?FONT_SIZE+=FONT_SIZE_PERCENT_STEP:($(this).attr("id")=="font_minus"?FONT_SIZE-=FONT_SIZE_PERCENT_STEP:FONT_SIZE=FONT_SIZE_PERCENT_DEFAULT);FONT_SIZE>FONT_SIZE_PERCENT_MAX?FONT_SIZE=FONT_SIZE_PERCENT_MAX:(FONT_SIZE<FONT_SIZE_PERCENT_MIN?FONT_SIZE=FONT_SIZE_PERCENT_MIN:false);new_size=(parseFloat($("body").css("font-size"))*FONT_SIZE/a);a!=FONT_SIZE?$("body").css("font-size",new_size+"px"):false;jQuery.post("time_probe.php",{font_size:FONT_SIZE+"%"},function(b){})});!jQuery.fx.off?jQuery(".blink").each(function(){sn_blink(this)}):false}function sn_blink(a){a=$(a);a.animate({opacity:a.css("opacity")==0?1:0},a.attr("duration")?parseInt(a.attr("duration")):1000,function(){sn_blink(this)})}$(document).on("click",".password_show",function(){input=$(this).parent().find("[name="+$(this).attr("show_element")+"]").hide();if(input.attr("type")=="password"){type="text";button_value=L_sys_login_password_hide}else{type="password";button_value=L_sys_login_password_show}var a=$('<input type="'+type+'" maxlength="32" />').attr("name",input.attr("name")).attr("class",input.attr("class")).val(input.val()).insertBefore(input);a.attr("id",input.attr("id"));input.remove();$(this).attr("value",button_value)});function sn_redirect(a){document.location.assign(a)}function sn_reload(){location.reload()}jQuery(document).on("click","[news_toggle]",function(){$("#news_"+$(this).attr("news_toggle")).show();$(this).remove()});jQuery(document).on("click",".survey_block [survey_id]",function(){var a=$(this).attr("survey_id");$(".survey_block [survey_id="+a+"]").removeClass("button_pseudo_pressed");$(this).addClass("button_pseudo_pressed");$('input:radio[name="survey['+a+']"]').val([$(this).attr("answer_id")])});jQuery(document).on("click",".button_pseudo",function(){$(this).addClass("button_pseudo_pressed")});jQuery(document).on("change","#sort_elements,#sort_elements_inverse",function(){jQuery.post($("#page_file_name").val()+"?mode="+$("#mode").val()+"&sort_elements="+$("#sort_elements").val()+"&sort_elements_inverse="+($("#sort_elements_inverse").is(":checked")?"1":"0"),function(){sn_reload()})});jQuery(document).on("click",".player_nick_award",function(a){document.location.assign("index.php?page=imperator&int_user_id="+jQuery(this).attr("player_id"))});jQuery(document).on("click",".player_nick_race",function(a){document.location.assign("index.php?page=races")});jQuery(document).on("click","button[href]",function(a){sn_redirect($(this).attr("href"))});jQuery(document).on("change","#empire_overview select[selector]",function(){if(jQuery(this).val()!="-"){jQuery("select[name^='percent["+jQuery(this).attr("selector")+"][']").val(jQuery(this).val())}});jQuery(document).on("click","input:button[id$='_ai_zero']",function(a,b){jQuery("#"+jQuery(this).attr("parent_id")).val(0).trigger("change",[a,b])});jQuery(document).on("click","input:button[id$='ai_max']",function(a,b){field_name="#"+jQuery(this).attr("parent_id");jQuery(field_name).val(parseInt(jQuery(field_name+"slide").slider("option","max"))).trigger("change",[a,b])});jQuery(document).on("mousedown","input:button[id$='ai_dec'],input:button[id$='ai_inc']",function(b,c){that=jQuery(this);var a=jQuery("#"+that.attr("parent_id"));if(a.is("[disabled]")||a.is("[slider_ticks]")){return}slider=jQuery("#"+that.attr("parent_id")+"slide");a.attr("slider_ticks",0).attr("step_now",slider.slider("option","step")).attr("increase",that.attr("id")==a.attr("id")+"_ai_inc"?1:-1);sn_ainput_mouselerate_jquery()}).on("mouseup","input:button[id$='ai_dec'],input:button[id$='ai_inc']",function(b,c){var a=jQuery("#"+jQuery(this).attr("parent_id"));clearTimeout(a.attr("timeout"));a.removeAttr("slider_ticks").removeAttr("step_now").removeAttr("increase").removeAttr("timeout")});jQuery(document).on("keyup change","[ainput]",function(a,b){if(b!=undefined&&b.type=="slidechange"){return}slider=jQuery("#"+jQuery(this).attr("id")+"slide");value=(value=parseInt(jQuery(this).val()))?value:0;value=value>(max_slide=parseInt(slider.slider("option","max")))?max_slide:(value<(min_slide=parseInt(slider.slider("option","min")))?min_slide:value);jQuery(this).val(value);slider.slider("value",value)}).on("focus","[ainput]",function(a,b){if(this.value=="0"){this.value=""}this.select()}).on("blur","[ainput]",function(a,b){that=jQuery(this);that.val(parseInt(that.val())?that.val():0)});jQuery(document).on("mouseup",function(a,b){jQuery("[slider_ticks]").each(function(){clearTimeout(jQuery(this).attr("timeout"));jQuery(this).removeAttr("slider_ticks").removeAttr("step_now").removeAttr("increase").removeAttr("timeout")});if(accelerated){clearTimeout(accelerated.timeout);accelerated=undefined}});jQuery(document).on("click","[go_url]",function(){if(jQuery(this).attr("target")=="_blank"){window.open(jQuery(this).attr("go_url"),"_blank")}else{document.location=jQuery(this).attr("go_url")}});function attr_on_me_or_parent(b,a){return parseInt(jQuery(b).attr(a)?jQuery(b).attr(a):jQuery(b).parent().attr(a))}jQuery(document).on("click","[go]",function(){var a=[],c,g,b;var f=jQuery(this).attr("target");var d=jQuery(this).attr("go");switch(d){case"info":d="infos";break;case"flying":d="flying_fleets";break;case"phalanx":case"fleet":window.uni_galaxy?a.push("galaxy="+window.uni_galaxy):false;window.uni_system?a.push("system="+window.uni_system):false;(planet_planet=attr_on_me_or_parent(this,"planet_planet"))?a.push("planet="+planet_planet):false;(planet_type=attr_on_me_or_parent(this,"planet_type"))?a.push("planettype="+planet_type):false;(mission=attr_on_me_or_parent(this,"mission"))?a.push("target_mission="+mission):false;break;case"galaxy":window.uni_galaxy?a.push("galaxy="+window.uni_galaxy):false;(planet_system=attr_on_me_or_parent(this,"planet_system"))?a.push("system="+planet_system):false;break;case"build":d="buildings";break;case"res":d="resources";break;case"stat":(g=attr_on_me_or_parent(this,"who"))?a.push("who="+g):false;a.push("range="+attr_on_me_or_parent(this,"rank")+"#"+attr_on_me_or_parent(this,"rank"));break;case"imperator":d="index";a.push("page=imperator");a.push("int_user_id="+attr_on_me_or_parent(this,"user_id"));break;case"messages":a.push("id="+attr_on_me_or_parent(this,"user_id"));break;case"buddy":a.push("request_user_id="+attr_on_me_or_parent(this,"user_id"));break;case"alliance":a.push("a="+attr_on_me_or_parent(this,"ally_id"));break;default:d="overview"}(c=attr_on_me_or_parent(this,"planet_id"))?a.push("cp="+c):false;(g=jQuery(this).attr("mode"))?a.push("mode="+g):false;(b=attr_on_me_or_parent(this,"unit_id"))?a.push("gid="+b):false;b&&window.ALLY_ID!==undefined&&parseInt(ALLY_ID)?a.push("ally_id="+ALLY_ID):false;a=d+".php?"+a.join("&");f?window.open(a,f):(document.location=a);$(this).removeClass("button_pseudo_pressed")});jQuery(document).on("click",".unit_preview .icon_gather",function(){that=$(this);document.location="fleet.php?fleet_page=5"+(typeof PLANET_ID!=="undefined"&&parseInt(PLANET_ID)?"&cp="+parseInt(PLANET_ID):"")+(parseFloat(that.attr("metal"))?"&metal="+parseFloat(that.attr("metal")):"")+(parseFloat(that.attr("crystal"))?"&crystal="+parseFloat(that.attr("crystal")):"")+(parseFloat(that.attr("deuterium"))?"&deuterium="+parseFloat(that.attr("deuterium")):"")});function sn_ainput_mouselerate_jquery(){jQuery("[slider_ticks]").each(function(){that=jQuery(this);slider=jQuery("#"+that.attr("id")+"slide");val=(val=parseInt(that.val()))?val:0;step_now=parseInt(that.attr("step_now"));val_next=val+step_now*parseInt(that.attr("increase"));val_next=val_next>(option_min=parseInt(slider.slider("option","min")))?val_next:option_min;val_next=val_next<(option_max=parseInt(slider.slider("option","max")))?val_next:option_max;if(val!=val_next){that.val(val_next).trigger("change");that.attr("slider_ticks",ticks=parseInt(that.attr("slider_ticks"))+1).attr("step_now",Math.round(step_now*(ticks%4==0?3:1)));that.attr("timeout",window.setTimeout(sn_ainput_mouselerate_jquery,ticks==1?700:250))}})}function sn_ainput_make_jquery(b,a){jQuery("ainput").each(function(){col_span=3;old=jQuery(this);step_value=(step_value=old.attr("step"))?step_value:1;start_value=(start_value=old.val())?start_value:0;field_name_orig=old.attr("name");b=field_name_orig.replace("[","").replace("]","");field_id="#"+b;slider_name=b+"slide";slider_id="#"+slider_name;new_element='<table width="100%" class="markup">';new_element+="<tr>";if(!old.is("[disable_min]")){new_element+='<td width="3em"><input type="button" value="0" parent_id="'+b+'" id="'+b+'_ai_zero" style="width: 3em"></td>';col_span++}new_element+='<td width="3em"><input type="button" value="-" parent_id="'+b+'" id="'+b+'_ai_dec" style="width: 3em"></td>';new_element+='<td style="padding-right: 2.25em;"><input type="text" ainput="true" value="0" id="'+b+'" style="width: 100%;" name="'+field_name_orig+'" /></td>';new_element+='<td width="3em"><input type="button" value="+" parent_id="'+b+'" id="'+b+'_ai_inc"  style="width: 3em"></td>';if(!old.is("[disable_max]")){new_element+='<td width="3em"><input type="button" value="M" parent_id="'+b+'" id="'+b+'_ai_max"  style="width: 3em"></td>';col_span++}new_element+="</tr>";new_element+='<tr><td colspan="'+col_span+'"><div parent_id="'+b+'" id="'+slider_name+'"></div></td></tr>';new_element+="</table>";jQuery(new_element).insertBefore(old);old.remove();jQuery("#"+b).val(start_value);jQuery(slider_id).slider({range:"min",value:start_value,min:(min_value=old.attr("min"))?min_value:0,max:(max_value=old.attr("max"))?max_value:0,step:1,slide:function(c,d){jQuery("#"+jQuery(this).attr("parent_id")).val(d.value).trigger("change",[c,d])},change:function(c,d){jQuery("#"+jQuery(this).attr("parent_id")).val(d.value).trigger("change",[c,d])}})})}var accelerated;function sn_ainput_make(f,i){var j=i.min?i.min:0;var g=i.max?i.max:0;var a=i.step?i.step:1;var h=i.value?i.value:j;var b=3;var c=f;f=f.replace("[","").replace("]","");var d="#"+f+"slide";document.write('<table width="100%" class="markup">');document.write("<tr>");if(i.button_zero){document.write('<td><input type="button" value="0" id="'+f+'zero" style="max-width: 31px"></td>');b++}document.write('<td><input type="button" value="-" id="'+f+'dec" style="max-width: 31px"></td>');document.write('<td><input type="text" value="0" id="'+f+'" style="width: 80%;" name="'+c+"\" onfocus=\"if(this.value == '0') this.value='';\" onblur=\"if(this.value == '') this.value='0';\"/></td>");document.write('<td><input type="button" value="+" id="'+f+'inc"  style="max-width: 31px"></td>');if(i.button_max){document.write('<td><input type="button" value="M" id="'+f+'max"  style="max-width: 31px"></td>');b++}document.write("</tr>");document.write('<tr><td colspan="'+b+'"><div id="'+f+'slide"></div></td></tr>');document.write("</table>");jQuery(d).slider({range:"min",value:h,min:j,max:g,step:1,slide:function(k,l){jQuery("#"+f).val(l.value).trigger("change",[k,l])},change:function(k,l){jQuery("#"+f).val(l.value).trigger("change",[k,l])}});jQuery("#"+f).val(jQuery(d).slider("value"));jQuery("#"+f).bind("keyup change",function(k,l){if(l!=undefined&&l.type=="slidechange"){return}value=parseInt(jQuery(this).val());value=value?value:0;slider=jQuery(d);if(value>parseInt(slider.slider("option","max"))){jQuery(this).val(slider.slider("option","max"))}if(value<parseInt(slider.slider("option","min"))){jQuery(this).val(slider.slider("option","min"))}slider.slider("value",value)}).button().addClass("ui-textfield");jQuery("#"+f+"zero").bind("click",function(k,l){jQuery("#"+f).val(0).trigger("change",[k,l])}).button();jQuery("#"+f+"max").bind("click",function(k,l){jQuery("#"+f).val(jQuery(d).slider("option","max")).trigger("change",[k,l])}).button();jQuery("#"+f+"dec, #"+f+"inc").bind("mousedown",function(l,m){var k=jQuery("#"+f);if(k.is("[disabled]")){return}accelerated={element:k,step:a,slider:d,ticks:0,step_now:a,timeout:0,increase:$(this).attr("id")==f+"inc"};sn_ainput_mouselerate()}).bind("mouseup",function(k,l){if(accelerated){clearTimeout(accelerated.timeout);accelerated=undefined}}).button()}function sn_ainput_mouselerate(){var a=false;if(accelerated.increase&&(val=parseInt(accelerated.element.val()))<(option_max=jQuery(accelerated.slider).slider("option","max"))){a=val+accelerated.step_now<option_max;accelerated.element.val(a?val+accelerated.step_now:option_max).trigger("change")}if(!accelerated.increase&&(val=parseInt(accelerated.element.val()))>0){a=val-accelerated.step_now>0;accelerated.element.val(a?val-accelerated.step_now:0).trigger("change")}if(a){accelerated.ticks++;if(accelerated.ticks%3==0){accelerated.step_now=accelerated.step_now*2}accelerated.timeout=window.setTimeout(sn_ainput_mouselerate,200)}}var popup=jQuery(document.createElement("span"));var popupIsOpen=false;popup.dialog({autoOpen:false});popup.mouseleave(function(){popup_hide()});function popup_hide(){$("[popup_opened_here]").removeAttr("popup_opened_here");popup.dialog("close");popupIsOpen=false}function popup_show(a,c,b){popup_hide();popup.dialog("option","width",b?b:"auto");popup.dialog("option","position",c?c:{my:"center",at:"center",of:window});popup.html(a);popup.dialog("open");popupIsOpen=true}function sn_probe_style(a,b){switch(b){case"border-top-color":if(a.currentStyle){return a.currentStyle.borderTopColor}if(document.defaultView){return document.defaultView.getComputedStyle(a,"").getPropertyValue("border-top-color")}break}return false}function sn_show_hide(b,c){var a=jQuery("#"+c);var d=a[0].tagName;a.css("display",a.css("display")=="none"?(d=="TR"?"table-row":(d=="UL"||d=="DIV"?"block":"inline")):"none");jQuery(b).html("[&nbsp;"+(a.css("display")=="none"?LA_sys_show:LA_sys_hide)+"&nbsp;]")}function cntchar(a){if(window.document.forms[0].text.value.length>a){window.document.forms[0].text.value=x}else{x=window.document.forms[0].text.value}if(e==null){e=document.getElementById("cntChars")}else{e.childNodes[0].data=window.document.forms[0].text.value.length}}function sn_format_number(g,m,a,n,o){var q,k,b,p,l,h,f,d,c;if(!m){m=0}if(!n){n=0}g=Math.round(g*Math.pow(10,m))/Math.pow(10,m);if(g>0){q=g+""}else{q=(-g)+""}k=q.split(".");if(!k[0]){k[0]="0"}if(!k[1]){k[1]=""}if(k[1].length<m){b=k[1];for(l=k[1].length+1;l<=m;l++){b+="0"}k[1]=b}if(k[0].length>3){p=k[0];k[0]="";for(h=3;h<p.length;h+=3){f=p.slice(p.length-h,p.length-h+3);k[0]="."+f+k[0]+""}d=p.substr(0,(p.length%3==0)?3:(p.length%3));k[0]=d+k[0]}c=k[0]+(k[1]?","+k[1]:"");if(g<0){c="-"+c}else{if(g>0&&o){c="+"+c}}if(a){if(g==Math.abs(n)){c='<span class="neutral">'+c+"</span>"}else{if((n>0&&-g<-n)||(!n&&g<0)||(n<0&&g<-n)){c='<span class="negative">'+c+"</span>"}else{c='<span class="'+a+'">'+c+"</span>"}}}return c}function sn_timestampToString(c,b){var d="",a;!(c=parseInt(c))?c=0:false;if(b){a=Math.floor(c/(60*60*24));c-=a*60*60*24;d+=(a>0?a+"d":"")}a=Math.floor(c/(60*60));c-=a*60*60;d+=(a<=9?"0":"")+a+":";a=Math.floor(c/60);c-=a*60;d+=(a<=9?"0":"")+a+":";d+=(c<=9?"0":"")+c;return d}function snDateToString(b,c,a){c===undefined?c=3:false;return(c&1?(c&4?b.getFullYear()+"-"+("0"+(b.getMonth()+1)).slice(-2)+"-"+("0"+b.getDate()).slice(-2):b.toLocaleDateString()):"")+(c&3?(a?"&nbsp;":" "):"")+(c&2?b.toTimeString().substring(0,8):"")}}function snConfirm(c){!c?c={}:false;var a=$(c.that);var b=$.Deferred();$('<div><div class="sn-dialog-confirm">'+(c.message?c.message:(a.attr("message")?a.attr("message"):language.sys_confirm_action))+"</div></div>").dialog({modal:true,autoOpen:true,resizable:false,width:c.width?c.width:"40em",title:c.title?c.title:(a.attr("title")?a.attr("title"):language.sys_confirm_action_title),open:function(){var d=$(this).parent();d.find(".ui-dialog-titlebar").css("display","block");d.find(".ui-dialog-buttonpane button:last").focus()},buttons:{ok:{text:language.sys_confirm,"class":"ok",click:function(){var d=$(this).parent();d.find(":button:not(.ui-dialog-titlebar-close)").button("disable");$(this).dialog("close");b.resolve(true)}},cancel:{text:language.sys_cancel,click:function(){$(this).dialog("close");b.resolve(false)}}}});b.promise().then(function(d){!d?a.removeClass("button_pseudo_pressed"):false;if(d&&a.attr("href")){sn_redirect(a.attr("href"))}if(d&&a.prop("tagName")=="FORM"){a.prop("submitted",true).submit()}});return false};